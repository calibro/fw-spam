(function(e){function t(t){for(var n,l,s=t[0],o=t[1],c=t[2],d=0,f=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&f.push(r[l][0]),r[l]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var o=a[s];0!==r[o]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},r={app:0},i=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/fw-spam/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=o;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0156":function(e,t,a){},"01d1":function(e,t,a){"use strict";var n=a("253f"),r=a.n(n);r.a},"09c9":function(e,t,a){},"1fbc":function(e,t,a){},"22af":function(e,t,a){},"253f":function(e,t,a){},"27b3":function(e,t,a){},"2cb3":function(e,t,a){"use strict";var n=a("09c9"),r=a.n(n);r.a},"3a06":function(e,t,a){"use strict";var n=a("22af"),r=a.n(n);r.a},5040:function(e,t,a){"use strict";var n=a("1fbc"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e._m(0),e.showApp?a("div",{staticClass:"ui-body"},[a("div",{staticClass:"options-bar-container item-container"},[a("options-bar")],1),a("div",{staticClass:"slide-container item-container"},[a("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"slide-box"},[a("slide-container",{ref:"slide"})],1),a("filter-sidebar")],1),a("div",{staticClass:"export-bar-container item-container"},[a("export-bar",{on:{export:e.doExport}})],1)]):a("div",{staticClass:"load-data-ui"},[a("data-selector")],1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fw-header item-container"},[a("div",[e._v("Infosec Data Visualization Lab")])])}],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.fetchingData?a("div",{staticClass:"loading-container"},[a("b-spinner",{attrs:{label:"Loading..."}}),e._v("\n  Loading...\n")],1):a("svg",{ref:"mainSlide",attrs:{id:"main-slide",preserveAspectRatio:"",width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 "+e.slideSizeArray.join(" ")}},[a("text",{attrs:{x:"25",y:"50","font-size":"32px","font-family":"'Arial', sans-serif","font-weight":"bold"}},[e._v("\n    "+e._s(e.sildeTitle)+"\n  ")]),a("circle-pack-chart",{attrs:{x:"25",y:"65",width:e.slideSizeArray[0]-25,height:e.slideSizeArray[1]-90}}),a("text",{attrs:{x:e.slideSizeArray[0]-25,y:e.slideSizeArray[1]-25,"font-size":"16px","font-family":"'Arial', sans-serif","text-anchor":"end",fill:"#aaa"}},[e._v("\n    "+e._s(e.slideSource)+"\n  ")])],1)},s=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),c=a("bc05"),u=(a("a481"),a("6762"),a("2fdb"),a("ac4d"),a("8a81"),a("67a3")),d=a.n(u),f="http://www.w3.org/2000/xmlns/",h="http://www.w3.org/1999/xlink",p="http://www.w3.org/2000/svg";function m(e){e=e.cloneNode(!0);var t=window.location.href+"#",a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);while(a.nextNode()){var n=!0,r=!1,i=void 0;try{for(var l,s=a.currentNode.attributes[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var o=l.value;o.value.includes(t)&&(o.value=o.value.replace(t,"#"))}}catch(b){r=!0,i=b}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}e.setAttributeNS(f,"xmlns",p),e.setAttributeNS(f,"xmlns:xlink",h);var c=new window.XMLSerializer,u=c.serializeToString(e),m=new Blob([u],{type:"image/svg+xml"});d()(m,"chart.svg")}var b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{ref:"mainSVG",attrs:{x:e.x,y:e.y,height:e.height,width:e.width}},[a("svg",{ref:"mainChart",attrs:{id:"main-chart",height:e.height,width:e.width}}),a("g",{ref:"legend",attrs:{id:"legend",transform:"translate(0,"+(e.height-100)+")"}})])},g=[],v=(a("7f7f"),a("55dd"),a("5698")),y=a("28ad"),O=a("2f62"),x=a("6f9a"),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-tippy-root":""}},[a("div",{staticClass:"tippy-box",attrs:{"data-placement":"top"}},[a("div",{staticClass:"tippy-content"},[e._v("\n        "+e._s(e.item.hostname)+"\n      ")])])])},w=[],C=(a("52df"),{name:"ChartTooltip",props:["item"]}),k=C,_=a("2877"),S=Object(_["a"])(k,j,w,!1,null,null,null),R=S.exports;function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={name:"CirclePackChart",props:["x","y","height","width"],computed:D({},Object(O["d"])({colorBy:function(e){return e.colorBy},areaBy:function(e){return e.areaBy},csvData:function(e){return e.data.csvData}}),{},Object(O["b"])({filteredData:"data/filteredData",hierarchyData:"data/filteredHierarchy"})),mounted:function(){this.draw()},methods:{init:function(){this.csvData;var e=v["k"]().domain(["Poor","Neutral","Good"]).range(["#D4003D","#EAEA6A","#00E4A2"]),t=v["j"]().domain([0,1,3]).range(["rgb(221,221,221)","rgb(253, 137, 60)","rgb(128, 0, 38)"]);this.colorScales={email_score_name:e,blacklists_count:t},this.legendLabels={lastmonth:"last month volume",lastday:"last day volume",email_score_name:"reputation",blacklists_count:"blacklist count"},this.initialized=!0},draw:function(){var e=this;!this.initialized&&this.init();var t=this,a=this.height,n=this.width,r=(Math.min(n,a),!1),i=v["l"](this.$refs.mainChart).attr("width",n).attr("height",a);if(0==this.hierarchyData.length)i.selectAll("*").remove(),v["l"](this.$refs.legend).selectAll("*").remove(),i.append("text").attr("class","no-data-text").style("font-size","20px").text("No data in your selection");else{i.selectAll(".no-data-text").remove();var l=v["a"]().innerRadius(0).outerRadius((function(e){return e})).startAngle(-Math.PI).endAngle(Math.PI),s=v["f"]({children:this.hierarchyData},(function(e){return e.children})),o=v["j"]().domain(v["d"](s.leaves(),(function(e){return e.data.lastmonth}))).range([1,100]),c=v["j"]().domain(v["d"](s.leaves(),(function(e){return e.data.lastday}))).range([1,100]),u={lastday:c,lastmonth:o},d=v["i"]().size([n,a]).padding(10)(s.sum((function(e){return u[t.areaBy](e[t.areaBy])})).sort((function(e,t){return t.value-e.value}))),f=v["h"](d.descendants().slice(r?0:1),(function(e){return e.x-e.r})),h=v["g"](d.descendants().slice(r?0:1),(function(e){return e.x+e.r})),p=v["h"](d.descendants().slice(r?0:1),(function(e){return e.y-e.r})),m=v["g"](d.descendants().slice(r?0:1),(function(e){return e.y+e.r})),b=v["j"]().range([6,14]).domain(v["d"](d.descendants().slice(r?0:1).filter((function(e){return e.children&&e.children.length>1})),(function(e){return e.r}))),g=i.selectAll(".node-g").data(d.descendants().slice(r?0:1).reverse(),(function(e){return e.data.level+e.data.name+(e.data.ip?e.data.ip:"group")})),O=g.enter().append("g").attr("class","node-g");O.attr("opacity",0).attr("transform",(function(t){return"translate(".concat(e.width/2,",").concat(e.height/2,")")})).append("path").attr("class","node-path").attr("id",(function(e,t){return e.id="p_"+t,"p_"+t})),g.exit().remove(),g=g.merge(O),g.transition().duration(500).attr("opacity",1).attr("transform",(function(e){return"translate(".concat(e.x+1,",").concat(e.y+1,")")})),g.select(".node-path").attr("d",(function(e){return l(e.r)}));var j=g.filter((function(e){return e.children&&1==e.children.length}));j.select("path").attr("stroke","none").attr("fill","none");var w=g.filter((function(e){return!e.children}));w.select("path").attr("stroke","none").on("mouseover",(function(e){Object(x["a"])(this,{content:"<div><strong>"+(e.data.hostname?e.data.hostname:e.data.ip)+"</strong></div><div>Last day: "+parseFloat(e.data.lastday).toFixed(2)+"</div><div>Last month: "+parseFloat(e.data.lastmonth).toFixed(2)+"</div><div>Reputation: "+e.data.email_score_name+"</div><div>Blacklists count: "+e.data.blacklists_count+(e.data.blacklists_count?" - "+e.data.blacklists_sources.replace(/ \|/g,", "):"")+"</div>",allowHTML:!0}),v["l"](this).attr("stroke","#222")})).on("mouseout",(function(e){!v["l"](this).classed("has-label")&&v["l"](this).attr("stroke","none")})).on("click",(function(e){var t=v["l"](this.parentNode);t.selectAll(".node-label").size()>0?(v["l"](this).attr("stroke","none").classed("has-label",!1),t.selectAll(".node-label").remove()):(v["l"](this).attr("stroke","#222").classed("has-label",!0),t.append("text").attr("fill","black").attr("class","node-label").attr("font-size","14px").attr("text-anchor","middle").attr("font-family","'Arial', sans-serif").text(e.data.hostname?e.data.hostname:e.data.ip),t.raise())})),w.select("path").transition().duration(500).attr("fill",(function(a){return e.colorScales[t.colorBy](a.data[t.colorBy])}));var C=g.filter((function(e){return e.children&&e.children.length>1}));C.select("path").attr("stroke","#ddd").attr("fill","none"),C.append("text").attr("dy","-0.3em").attr("fill","black").attr("font-size",(function(e){return b(e.r)+"px"})).attr("text-anchor","middle").attr("font-family","'Arial', sans-serif").append("textPath").attr("xlink:href",(function(e){return"#"+e.id})).attr("startOffset","50%").text((function(e){return e.data.name}));var k=v["l"](this.$refs.legend).select(".legendColor"),_=y["a"].legendColor().shapePadding(10).title(t.legendLabels[t.colorBy]).scale(t.colorScales[t.colorBy]);"blacklists_count"===t.colorBy&&_.cells(t.colorScales[t.colorBy].domain()).labelFormat(v["e"](".0f")),k.empty()?(v["l"](this.$refs.legend).append("g").attr("class","legendColor"),v["l"](this.$refs.legend).select(".legendColor").call(_),v["l"](this.$refs.legend).select(".legendColor").selectAll("text").attr("font-family","'Arial', sans-serif")):(k.call(_),k.selectAll("text").attr("font-family","'Arial', sans-serif"));var S=v["d"](s.leaves(),(function(e){return e.r})),R=v["d"](s.leaves(),(function(e){return e.data[t.areaBy]})),P=v["j"]().domain(S).range(R),D=[5,20,40],F=D.map((function(e){return{r:e,label:P(e)}}));v["l"](this.$refs.legend).select(".legendSize").empty()&&v["l"](this.$refs.legend).append("g").attr("class","legendSize").attr("transform","translate(150,0)").append("text").attr("class","legendTitle").text(t.legendLabels[t.areaBy]).attr("font-family","'Arial', sans-serif");var $=v["l"](this.$refs.legend).select(".legendSize"),E=$.selectAll("g").data(F).join("g").attr("transform","translate(0,19)");E.selectAll("circle").data((function(e){return[e]})).join("circle").attr("fill","none").attr("stroke","#ccc").attr("cx",v["g"](D)).attr("r",(function(e){return e.r})).attr("cy",(function(e){return 2*v["g"](D)-e.r})),E.selectAll("line").data((function(e){return[e]})).join("line").attr("stroke","#ccc").attr("stroke-dasharray","3 3").attr("x1",v["g"](D)).attr("y1",(function(e){return 2*v["g"](D)-2*e.r})).attr("x2",2*v["g"](D)+8).attr("y2",(function(e){return 2*v["g"](D)-2*e.r})),E.selectAll("text").data((function(e){return[e]})).join("text").attr("font-family","'Arial', sans-serif").attr("dy",6).attr("x",2*v["g"](D)+12).attr("y",(function(e){return 2*v["g"](D)-2*e.r})).text((function(e){return v["e"]("0.2f")(e.label)})),this.scaleToFit(f,h,p,m)}},scaleToFit:function(e,t,a,n){var r=12;v["l"](this.$refs.mainChart).attr("viewBox","".concat(e," ").concat(a-r," ").concat(t-e," ").concat(n-a+2*r))},tooltipContent:function(e){var t=n["default"].extend(R);if(e){var a=new t({propsData:{item:e.data}});return a.$mount(),a.$el}return""}},watch:{hierarchyData:function(){this.draw()},height:function(){this.draw()},areaBy:function(){this.draw()},colorBy:function(){this.draw()}}},$=F,E=(a("ac1a"),Object(_["a"])($,b,g,!1,null,null,null)),A=E.exports;function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L={name:"SlideContainer",data:function(){return{svgHeight:0}},components:{CirclePackChart:A},mounted:function(){this.resize()},computed:B({},Object(O["d"])({sildeTitle:function(e){return e.sildeTitle},slideSource:function(e){return e.slideSource},fetchingData:function(e){return e.data.fetchingData}}),{},Object(O["b"])(["slideSizeArray"]),{aspectRatio:function(){return this.slideSizeArray[0]/this.slideSizeArray[1]},svgWidth:function(){return this.svgHeight*this.aspectRatio}}),methods:{exportImage:function(e){switch(e){case"png":Object(c["saveSvgAsPng"])(this.$refs.mainSlide,"chart.png");break;case"svg":m(this.$refs.mainSlide)}},resize:function(){this.svgHeight=this.$el.parentNode.clientHeight}}},z=L,T=(a("2cb3"),Object(_["a"])(z,l,s,!1,null,"c98453e4",null)),N=T.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"options-bar"},[a("b-row",[a("b-col",{attrs:{sm:"6"}},[a("data-selector")],1),a("b-col",[a("fw-select",{attrs:{label:"Area by",value:e.areaBy,options:e.areaOptions},on:{change:e.setAreaBy}})],1),a("b-col",[a("fw-select",{attrs:{label:"Color by",value:e.colorBy,options:e.colorOptions},on:{change:e.setColorBy}})],1)],1)],1)},M=[],V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-selector"},[a("div",{staticClass:"upload-button-container"},[e.selectedFile?a("div",{staticClass:"upload-file-name"},[e._v("\n        "+e._s(e.selectedFile.name)+"\n      ")]):e._e(),a("fw-button",{staticClass:"upload-button",on:{click:e.openSelectFile}},[e._v("\n      Upload data\n      "),a("input",{ref:"fileSelector",staticStyle:{display:"none"},attrs:{type:"file",accept:"text/csv"},on:{change:e.onSelectFile}})])],1),a("span",{staticClass:"separator"},[e._v("or")]),a("b-form-select",{attrs:{options:e.remoteFileList,"value-field":"filename","text-field":"filename"},on:{change:e.selectRemoteFile},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Please select an option --")])]},proxy:!0}]),model:{value:e.selectedRemote,callback:function(t){e.selectedRemote=t},expression:"selectedRemote"}})],1)},W=[];function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J={name:"DataSelector",mounted:function(){this.$store.dispatch("loadRemoteFileList")},computed:G({},Object(O["d"])({remoteFileList:function(e){return e.remoteFileList},selectedFile:function(e){return e.data.selectedDataSource.localFile},selectedRemote:function(e){return e.data.selectedDataSource.remoteFileUrl}})),methods:{openSelectFile:function(){this.$refs.fileSelector.click()},onSelectFile:function(e){var t=e.target.files.length>0&&e.target.files[0];t&&this.$store.dispatch("data/loadDataFromFile",t)},selectRemoteFile:function(e){this.$store.dispatch("data/loadData",e)}}},X=J,q=(a("01d1"),Object(_["a"])(X,V,W,!1,null,"def75e0a",null)),K=q.exports;function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z={name:"OptionsBar",components:{DataSelector:K},data:function(){return{areaOptions:[{value:"lastmonth",text:"Last Month"},{value:"lastday",text:"Last Day"}],colorOptions:[{value:"email_score_name",text:"Reputation"},{value:"blacklists_count",text:"Blacklist count"}]}},computed:Y({},Object(O["d"])(["areaBy","colorBy"])),methods:Y({},Object(O["c"])(["setAreaBy","setColorBy"]))},ee=Z,te=(a("3a06"),Object(_["a"])(ee,I,M,!1,null,"f13c2516",null)),ae=te.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"export-bar"},[a("b-row",[a("b-col",[a("fw-input",{attrs:{label:"Title",value:e.slideTitle},on:{input:e.setSildeTitle}})],1),a("b-col",[a("fw-input",{attrs:{label:"Source",value:e.slideSource},on:{input:e.setSlideSource}})],1),a("b-col",[a("fw-select",{attrs:{label:"Slide size",value:e.slideSize,options:e.slideSizeOptions},on:{change:e.setSlideSize}})],1),a("b-col",[a("b-dropdown",{staticClass:"export-button",attrs:{dropup:"",right:"",text:"Export slide",variant:"warning"}},[a("b-dropdown-item",{on:{click:function(){return e.onExport("svg")}}},[e._v("SVG")]),a("b-dropdown-item",{on:{click:function(){return e.onExport("png")}}},[e._v("PNG")])],1)],1)],1)],1)},re=[];function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var se={name:"ExportBar",data:function(){return{slideSizeOptions:[{value:"1920:1080",text:"1920 x 1080 (16:9)"},{value:"1024:768",text:"1024 x 768 (4:3)"},{value:"1191:842",text:"1191 x 842 (A3 landscape)"}]}},computed:le({},Object(O["d"])(["slideTitle","slideSource","slideSize"])),methods:le({},Object(O["c"])(["setSildeTitle","setSlideSource","setSlideSize"]),{onExport:function(e){this.$emit("export",e)}})},oe=se,ce=(a("6209"),Object(_["a"])(oe,ne,re,!1,null,"a3134026",null)),ue=ce.exports,de=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hide,expression:"hide"}],staticClass:"filter-sidebar",class:{open:t.isOpen}},[n("div",{staticClass:"button-container"},[n("b-button",{staticClass:"button-toggle-filter",attrs:{pill:""},on:{click:t.toggleSidebar}},[n("b-icon-filter")],1)],1),n("div",{staticClass:"filters-container"},[n("div",{staticClass:"filter-header"},[n("div",{staticClass:"filter-title"},[t._v("Filters")]),n("div",{staticClass:"filter-reset",on:{click:function(){return e["data/resetFilters"]()}}},[t._v("RESET")])]),n("div",{staticClass:"filter-list",attrs:{role:"tablist"}},[n("div",{staticClass:"filter-block"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],staticClass:"filter-according-toggle",attrs:{role:"tab"}},[t._v("Hierachy"),n("b-icon-chevron-up",{staticClass:"caret"})],1),n("b-collapse",{attrs:{id:"accordion-1",visible:"",accordion:"filter-accordion",role:"tabpanel"}},[n("div",{staticClass:"filter-body"},[n("hierarchy-filter",{attrs:{excludeHierarchy:t.excludeHierarchy,onChange:this["data/toggleExcludeHierarchy"]}})],1)])],1),n("div",{staticClass:"filter-block"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2",modifiers:{"accordion-2":!0}}],staticClass:"filter-according-toggle",attrs:{role:"tab"}},[t._v("Reputation"),n("b-icon-chevron-up",{staticClass:"caret"})],1),n("b-collapse",{attrs:{id:"accordion-2",visible:"",accordion:"filter-accordion",role:"tabpanel"}},[n("div",{staticClass:"filter-body"},[n("checkbox-filter",{attrs:{options:t.reputationOptions,value:t.reputationValue,onChange:this["data/setReputation"]}})],1)])],1),n("div",{staticClass:"filter-block"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-3",modifiers:{"accordion-3":!0}}],staticClass:"filter-according-toggle",attrs:{role:"tab"}},[t._v("Last day volume"),n("b-icon-chevron-up",{staticClass:"caret"})],1),n("b-collapse",{attrs:{id:"accordion-3",visible:"",accordion:"filter-accordion",role:"tabpanel"}},[n("div",{staticClass:"filter-body"},[n("range-filter",{attrs:{range:t.lastdayRangeOptions,value:t.lastdayRangeValue,onChange:this["data/setLastdayRange"]}})],1)])],1),n("div",{staticClass:"filter-block"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-4",modifiers:{"accordion-4":!0}}],staticClass:"filter-according-toggle",attrs:{role:"tab"}},[t._v("Last month volume"),n("b-icon-chevron-up",{staticClass:"caret"})],1),n("b-collapse",{attrs:{id:"accordion-4",visible:"",accordion:"filter-accordion",role:"tabpanel"}},[n("div",{staticClass:"filter-body"},[n("range-filter",{attrs:{range:t.lastmonthRangeOptions,value:t.lastmonthRangeValue,onChange:this["data/setLastmonthRange"]}})],1)])],1),n("div",{staticClass:"filter-block"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-5",modifiers:{"accordion-5":!0}}],staticClass:"filter-according-toggle",attrs:{role:"tab"}},[t._v("Blacklist"),n("b-icon-chevron-up",{staticClass:"caret"})],1),n("b-collapse",{attrs:{id:"accordion-5",visible:"",accordion:"filter-accordion",role:"tabpanel"}},[n("div",{staticClass:"filter-body"},[n("checkbox-filter",{attrs:{options:t.blacklistsOptions,value:t.blacklistsValue,onChange:this["data/setBlacklists"]}})],1)])],1)])])])},fe=[],he=a("e67d"),pe=a.n(he),me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form-group",[a("b-form-checkbox-group",{attrs:{options:e.options,name:e.name},on:{change:e.change},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},be=[],ge={name:"CheckboxFilter",props:["name","options","value","onChange"],data:function(){return{selected:null}},methods:{change:function(e){this.onChange(e)}}},ve=ge,ye=Object(_["a"])(ve,me,be,!1,null,"6b5158c0",null),Oe=ye.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"range-filter"},[a("div",{staticClass:"input-block"},[a("label",[e._v("Min")]),a("b-form-input",{ref:"minInput",attrs:{value:e.minVal,type:"number",min:e.minVal,max:e.maxVal,step:"0.01"},on:{input:e.change}})],1),a("div",{staticClass:"input-block"},[a("label",[e._v("Max")]),a("b-form-input",{ref:"maxInput",attrs:{value:e.maxVal,type:"number",min:e.minVal,max:e.maxVal,step:"0.01"},on:{input:e.change}})],1)])},je=[],we={name:"RangeFilter",props:["range","value","onChange"],computed:{minRange:function(){return this.range&&2==this.range.length?this.range[0].toFixed(2):0},maxRange:function(){return this.range&&2==this.range.length?this.range[1].toFixed(2):10},minVal:function(){return this.value&&2==this.value.length?this.value[0].toFixed(2):0},maxVal:function(){return this.value&&2==this.value.length?this.value[1].toFixed(2):10}},methods:{change:function(e){var t=parseFloat(this.$refs.minInput.localValue),a=parseFloat(this.$refs.maxInput.localValue);this.onChange([t,a])}}},Ce=we,ke=(a("60a0"),Object(_["a"])(Ce,xe,je,!1,null,"3b43e010",null)),_e=ke.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hierarchy-filter"},[a("div",{staticClass:"hierarchy-filter-controls"},[a("b-form-input",{staticClass:"search-input",attrs:{placeholder:"Seach"},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),a("div",{staticClass:"select-deselect-all"},[a("span",{staticClass:"select-all",on:{click:e.selectAll}},[e._v("Select all")]),e._v(" / "),a("span",{staticClass:"select-all",on:{click:e.deselectAll}},[e._v("Deselect all")])])],1),e._l(e.filteredHierarchy,(function(t,n){return a("hierarchy-tree-item",{key:t.name+"-"+n,attrs:{item:t,level:0,excludeHierarchy:e.excludeHierarchy,onChange:e.changedNode}})}))],2)},Re=[],Pe=(a("5df3"),a("1c4c"),a("20d6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.item?a("div",{staticClass:"tree-item",class:{leaf:!e.isNotLeaf}},[a("div",{staticClass:"item-line"},[e.isNotLeaf?a("span",{staticClass:"caret",class:{open:e.openTree},on:{click:e.toggleTree}},[a("b-icon-chevron-up")],1):e._e(),a("input",{directives:[{name:"indeterminate",rawName:"v-indeterminate",value:e.isIndeterminate,expression:"isIndeterminate"}],staticClass:"item-checkbox",attrs:{type:"checkbox",name:e.label},domProps:{checked:e.isChecked},on:{click:e.toggleCheckbox}}),e._v("\n    "+e._s(e.label)+"\n  ")]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.openTree,expression:"openTree"}],staticClass:"children-container"},e._l(e.children,(function(t,n){return a("hierarchy-tree-item",{key:t.name+"-"+n,ref:"childrenList",refInFor:!0,attrs:{item:t,level:e.level+1,excludeHierarchy:e.excludeHierarchy,onChange:e.onChange}})})),1)])],1):e._e()}),De=[],Fe={name:"HierarchyTreeItem",props:["item","level","excludeHierarchy","onChange"],data:function(){return{openTree:!1,checkedChildren:this.item.children?this.item.children.length:0,indeterminateChildren:0}},mounted:function(){this.item.children&&this.countCheckedChildren()},computed:{isNotLeaf:function(){return"hostname"!=this.item.level},label:function(){return this.item.name},children:function(){return this.item.children},isChecked:function(){return this.isNotLeaf?this.checkedChildren>0:this.$store.getters["data/isNodeInHierarchy"](this.item)},isIndeterminate:function(){return this.isNotLeaf&&this.checkedChildren>0&&this.checkedChildren<this.children.length||this.isNotLeaf&&this.indeterminateChildren>0&&this.indeterminateChildren==this.children.length}},methods:{toggleTree:function(){this.openTree=!this.openTree},toggleCheckbox:function(e){var t=e.target.checked;this.onChange(this,t)},countCheckedChildren:function(){this.isNotLeaf&&(this.checkedChildren=this.$refs.childrenList?this.$refs.childrenList.filter((function(e){return e.countCheckedChildren(),e.isChecked})).length:this.children.length,this.indeterminateChildren=this.$refs.childrenList?this.$refs.childrenList.filter((function(e){return e.countCheckedChildren(),e.isIndeterminate})).length:0)}},watch:{excludeHierarchy:function(){this.isNotLeaf&&this.countCheckedChildren()}},directives:{indeterminate:function(e,t){e.indeterminate=Boolean(t.value)}}},$e=Fe,Ee=(a("5040"),Object(_["a"])($e,Pe,De,!1,null,"1ae56190",null)),Ae=Ee.exports,He={name:"HierarchyFilter",components:{HierarchyTreeItem:Ae},props:["excludeHierarchy","onChange"],data:function(){return{searchTerm:""}},computed:{filteredHierarchy:function(){var e=this,t=JSON.parse(JSON.stringify(this.hierarchy)),a=function t(a){var n=!1;return a.children&&(a.children=a.children.filter(t),n=a.children.length>0),a.name&&a.name.includes(e.searchTerm)||n};return this.searchTerm?t.filter(a):t},hierarchy:function(){return this.$store.state.data.hierarchy}},methods:{changedNode:function(e,t){if(t&&e.level>0&&!e.$parent.isChecked){var a=this.excludeHierarchy;a.splice(a.findIndex((function(t){return t.name==e.item.name})),1),a.splice(a.findIndex((function(t){return t.name==e.$parent.item.name})),1),e.$parent.item.children&&e.$parent.item.children.forEach((function(t){t.name!=e.item.name&&a.push(t)})),this.$store.commit("data/setExcludeHierarchy",a)}else this.$store.commit("data/toggleExcludeHierarchy",e.item)},selectAll:function(){this.$store.commit("data/setExcludeHierarchy",[])},deselectAll:function(){this.$store.commit("data/setExcludeHierarchy",Array.from(this.hierarchy))}}},Be=He,Le=(a("7ab3"),Object(_["a"])(Be,Se,Re,!1,null,"7b7cf181",null)),ze=Le.exports;function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ie={name:"FilterSidebar",components:{RangeFilter:_e,CheckboxFilter:Oe,HierarchyFilter:ze},data:function(){return{isOpen:!1}},computed:Ne({},Object(O["d"])({reputationValue:function(e){return e.data.filters.reputation},reputationOptions:function(e){return e.data.filterOptions.reputation},blacklistsValue:function(e){return e.data.filters.blacklists},blacklistsOptions:function(e){return e.data.filterOptions.blacklists},lastdayRangeValue:function(e){return e.data.filters.lastdayRange},lastdayRangeOptions:function(e){return e.data.filterOptions.lastdayRange},lastmonthRangeValue:function(e){return e.data.filters.lastmonthRange},lastmonthRangeOptions:function(e){return e.data.filterOptions.lastmonthRange},excludeHierarchy:function(e){return e.data.filters.excludeHierarchy}})),methods:Ne({},Object(O["c"])(["data/setReputation","data/setBlacklists","data/setLastdayRange","data/setLastmonthRange","data/resetFilters","data/toggleExcludeHierarchy"]),{toggleSidebar:function(){this.isOpen=!this.isOpen},hide:function(){this.isOpen=!1}}),directives:{ClickOutside:pe.a}},Me=Ie,Ve=(a("7016"),Object(_["a"])(Me,de,fe,!1,null,"06fa4042",null)),We=Ve.exports,Ue=a("428d"),Ge=a.n(Ue),Je={name:"app",components:{SlideContainer:N,ExportBar:ue,OptionsBar:ae,FilterSidebar:We,DataSelector:K},computed:{showApp:function(){return this.$store.state.data.csvData.length>0||this.$store.state.data.fetchingData}},methods:{doExport:function(e){this.$refs.slide.exportImage(e)},onResize:function(){this.$refs.slide.resize()}},directives:{resize:Ge.a}},Xe=Je,qe=(a("7faf"),Object(_["a"])(Xe,r,i,!1,null,null,null)),Ke=qe.exports,Qe=(a("28a5"),a("96cf"),a("3b8d")),Ye=(a("4f7f"),a("75fc")),Ze=a("768b"),et=a("e13a");function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nt={reputation:["poor","neutral","good"],blacklists:[],lastdayRange:[0,10],lastmonthRange:[0,10],excludeHierarchy:[]},rt=function(e){var t=Array.from(Object(et["a"])(e,(function(e){return e.category}),(function(e){return e.second_level_domain?e.second_level_domain:e.ip})),(function(e){var t=Object(Ze["a"])(e,2),a=t[0],n=t[1];return{level:"category",name:a,children:Array.from(n,(function(e){var t=Object(Ze["a"])(e,2),a=t[0],n=t[1];return{level:"second_level_domain",name:a,children:n.map((function(e){return at({},e,{level:"hostname",name:e.hostname?e.hostname:e.ip})}))}}))}}));return 1!=t.length||t[0].name||(t=t[0].children),console.log(t),t},it=function(e,t){var a=e.filters.excludeHierarchy.reduce((function(e,a){return e&&t[a.level]!=a.name}),!0);return a},lt={namespaced:!0,state:{loaded:!1,fetchingData:!1,csvData:[],hierarchy:[],selectedDataSource:{localFile:null,remoteFileUrl:null},filters:Object.assign({},nt),filterOptions:{reputation:[{text:"Poor",value:"poor"},{text:"Neutral",value:"neutral"},{text:"Good",value:"good"}],blacklists:[],lastdayRange:[],lastmonthRange:[]}},getters:{filteredHierarchy:function(e){var t=rt(e.csvData.filter((function(t){return e.filters.reputation.includes(t.email_score_name.toLowerCase())&&e.filters.blacklists.includes(t.blacklists_count)&&(!e.filters.lastdayRange||parseFloat(t.lastday)>=parseFloat(e.filters.lastdayRange[0])&&parseFloat(t.lastday)<=parseFloat(e.filters.lastdayRange[1]))&&(!e.filters.lastmonthRange||parseFloat(t.lastmonth)>=parseFloat(e.filters.lastmonthRange[0])&&parseFloat(t.lastmonth)<=parseFloat(e.filters.lastmonthRange[1]))&&(0==e.filters.excludeHierarchy.length||it(e,t))})));return t},isNodeInHierarchy:function(e){return function(t){return 0==e.filters.excludeHierarchy.length||it(e,t)}}},mutations:{setData:function(e,t){e.loaded=!0,e.fetchingData=!1,e.csvData=t,e.hierarchy=rt(t);var a=Object(Ye["a"])(new Set(t.map((function(e){return e.blacklists_count})))).sort((function(e,t){return e-t}));e.filterOptions.blacklists=a.map((function(e){return{text:e,value:e}}));var n=t.map((function(e){return parseFloat(e.lastday)}));e.filterOptions.lastdayRange=[Math.min.apply(Math,Object(Ye["a"])(n)),Math.max.apply(Math,Object(Ye["a"])(n))+.01];var r=t.map((function(e){return parseFloat(e.lastmonth)}));e.filterOptions.lastmonthRange=[Math.min.apply(Math,Object(Ye["a"])(r)),Math.max.apply(Math,Object(Ye["a"])(r))+.01],e.filters.blacklists=e.filterOptions.blacklists.map((function(e){return e.value})),e.filters.lastdayRange=e.filterOptions.lastdayRange,e.filters.lastmonthRange=e.filterOptions.lastmonthRange},setReputation:function(e,t){e.filters.reputation=t},setBlacklists:function(e,t){e.filters.blacklists=t},setLastdayRange:function(e,t){e.filters.lastdayRange=t},setLastmonthRange:function(e,t){e.filters.lastmonthRange=t},setExcludeHierarchy:function(e,t){n["default"].set(e.filters,"excludeHierarchy",t)},toggleExcludeHierarchy:function(e,t){var a=e.filters.excludeHierarchy,r=a.findIndex((function(e){return e.level==t.level&&e.name==t.name}));r>=0||t.forceCheck?a.splice(r,1):a.push(t),n["default"].set(e.filters,"excludeHierarchy",a)},resetFilters:function(e){var t=Object.assign({},nt);t.blacklists=e.filterOptions.blacklists.map((function(e){return e.value})),t.lastdayRange=e.filterOptions.lastdayRange,t.lastmonthRange=e.filterOptions.lastmonthRange,t.excludeHierarchy=[],e.filters=Object.assign({},t)}},actions:{loadTestData:function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,n=t.commit,a.loaded=!1,a.fetchingData=!0,e.next=5,v["c"]("./data/data.csv",v["b"]);case 5:r=e.sent,n("setData",r),n("resetFilters");case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),loadDataFromFile:function(e,t){var a=e.state,n=e.commit;if(t){a.loaded=!1,a.fetchingData=!0,a.selectedDataSource={localFile:t,remoteFileUrl:null};var r=new FileReader;r.onloadend=function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.target.result,e.next=3,v["c"](a,v["b"]);case 3:r=e.sent,n("setData",r),n("resetFilters");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsDataURL(t)}},loadData:function(){var e=Object(Qe["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,n.loaded=!1,n.fetchingData=!0,n.selectedDataSource={localFile:null,remoteFileUrl:a},e.next=6,v["c"]("https://fathomless-river-94944.herokuapp.com/data/"+a,v["b"]);case 6:i=e.sent,r("setData",i),r("resetFilters");case 9:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()}},st=a("bc3a"),ot=a.n(st);n["default"].use(O["a"]);var ct=new O["a"].Store({modules:{data:lt},state:{areaBy:"lastmonth",colorBy:"email_score_name",sildeTitle:"",slideSource:"",slideSize:"1920:1080",remoteFileList:[]},getters:{slideSizeArray:function(e){return e.slideSize.split(":")}},mutations:{setAreaBy:function(e,t){e.areaBy=t},setColorBy:function(e,t){e.colorBy=t},setSildeTitle:function(e,t){e.sildeTitle=t},setSlideSource:function(e,t){e.slideSource=t},setSlideSize:function(e,t){e.slideSize=t},setRemoteFileList:function(e,t){e.remoteFileList=t}},actions:{loadRemoteFileList:function(e){e.state;var t=e.commit;ot.a.get("https://fathomless-river-94944.herokuapp.com/api/data").then((function(e){t("setRemoteFileList",e.data.list)}))}}}),ut=a("5f5b"),dt=a("b1e0"),ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-button",{staticClass:"fw-button",attrs:{variant:"warning"},on:{click:e.onClick}},[e._t("default")],2)},ht=[],pt={name:"FWButton",methods:{onClick:function(e){this.$emit("click",e)}}},mt=pt,bt=Object(_["a"])(mt,ft,ht,!1,null,"7274bea9",null),gt=bt.exports,vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fw-option-select"},[a("label",[e._v(e._s(e.label))]),a("b-form-select",{attrs:{value:e.value,options:e.options},on:{change:e.onChange}})],1)},yt=[],Ot={name:"FWOptionSelect",props:["label","value","options"],methods:{onChange:function(e){this.$emit("change",e)}}},xt=Ot,jt=(a("fdea"),Object(_["a"])(xt,vt,yt,!1,null,"47c3f63c",null)),wt=jt.exports,Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fw-input"},[a("label",[e._v(e._s(e.label))]),a("b-form-input",{attrs:{value:e.value},on:{input:e.onInput}})],1)},kt=[],_t={name:"FWInput",props:["label","value"],methods:{onInput:function(e){this.$emit("input",e)}}},St=_t,Rt=Object(_["a"])(St,Ct,kt,!1,null,"723afef4",null),Pt=Rt.exports;a("f9e3"),a("2dd8");n["default"].use(ut["a"]),n["default"].use(dt["a"]),n["default"].component("fw-button",gt),n["default"].component("fw-select",wt),n["default"].component("fw-input",Pt),n["default"].config.productionTip=!1,new n["default"]({store:ct,render:function(e){return e(Ke)}}).$mount("#app")},"60a0":function(e,t,a){"use strict";var n=a("bdae"),r=a.n(n);r.a},6209:function(e,t,a){"use strict";var n=a("27b3"),r=a.n(n);r.a},7016:function(e,t,a){"use strict";var n=a("c815"),r=a.n(n);r.a},"77d1":function(e,t,a){},"7ab3":function(e,t,a){"use strict";var n=a("77d1"),r=a.n(n);r.a},"7faf":function(e,t,a){"use strict";var n=a("8fba"),r=a.n(n);r.a},"8fba":function(e,t,a){},ac1a:function(e,t,a){"use strict";var n=a("0156"),r=a.n(n);r.a},bdae:function(e,t,a){},c815:function(e,t,a){},fd88:function(e,t,a){},fdea:function(e,t,a){"use strict";var n=a("fd88"),r=a.n(n);r.a}});
//# sourceMappingURL=app.034db34f.js.map